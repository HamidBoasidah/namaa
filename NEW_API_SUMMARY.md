# โ ุชู ุฅุถุงูุฉ API ุฌุฏูุฏ - ูุงุฆูุฉ ุงููุญุงุฏุซุงุช

## ๐ฏ ูุง ุชู ุฅูุฌุงุฒู

ุชู ุฅูุดุงุก **API ูุงูู** ูุนุฑุถ ูุงุฆูุฉ ุงููุญุงุฏุซุงุช ูุน ุงูุจุญุซ ูุงูุชุตูุญ.

---

## ๐ฆ ุงููููุงุช ุงููููุดุฃุฉ/ุงูููุนุฏููุฉ

### โ ูููุงุช ุฌุฏูุฏุฉ:
1. `app/Http/Requests/Api/GetConversationsRequest.php` - ุงูุชุญูู ูู ุงูุจูุงูุงุช
2. `app/Http/Resources/ConversationListResource.php` - ุชูุณูู ุงูุงุณุชุฌุงุจุฉ
3. `postman/CONVERSATIONS_LIST_API.md` - ุงูุชูุซูู ุงููุงูู

### โ ูููุงุช ูุนุฏููุฉ:
1. `app/Repositories/ConversationRepository.php` - ุฅุถุงูุฉ `getUserConversations()`
2. `app/Services/ChatService.php` - ุฅุถุงูุฉ `getUserConversations()`
3. `app/Http/Controllers/Api/ConversationController.php` - ุฅุถุงูุฉ `index()`
4. `routes/api.php` - ุฅุถุงูุฉ route ุฌุฏูุฏ

---

## ๐ ุงูู Endpoint ุงูุฌุฏูุฏ

```
GET /api/conversations
```

### ุงููุนุงููุงุช:
- `search` (optional) - ุงูุจุญุซ ูู ุฃุณูุงุก ุงููุดุงุฑููู
- `per_page` (optional) - ุนุฏุฏ ุงููุญุงุฏุซุงุช (1-100ุ ุงูุชุฑุงุถู: 20)

### ุงูุงุณุชุฌุงุจุฉ:
```json
{
  "success": true,
  "message": "ุชู ุฌูุจ ุงููุญุงุฏุซุงุช ุจูุฌุงุญ",
  "data": [
    {
      "id": 1,
      "booking_id": 42,
      "other_participant": {
        "id": 20,
        "first_name": "ุณุงุฑุฉ",
        "last_name": "ุฃุญูุฏ",
        "full_name": "ุณุงุฑุฉ ุฃุญูุฏ",
        "avatar": "https://..."
      },
      "last_message": {
        "id": 105,
        "body": "ุดูุฑุงู ูู",
        "type": "text",
        "sender_id": 20,
        "is_from_me": false,
        "created_at": "2026-01-21T15:30:00Z"
      },
      "created_at": "2026-01-20T10:00:00Z",
      "updated_at": "2026-01-21T15:30:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "total": 5,
    "per_page": 20
  }
}
```

---

## โจ ุงูููุฒุงุช

### 1๏ธโฃ ุนุฑุถ ูุงุฆูุฉ ุงููุญุงุฏุซุงุช
- โ ุฌููุน ูุญุงุฏุซุงุช ุงููุณุชุฎุฏู
- โ ูุฑุชุจุฉ ุญุณุจ ุขุฎุฑ ุชุญุฏูุซ
- โ ูุน ูุนูููุงุช ุงููุดุงุฑู ุงูุขุฎุฑ

### 2๏ธโฃ ุงูุจุญุซ
- โ ุงูุจุญุซ ูู ุงูุงุณู ุงูุฃูู
- โ ุงูุจุญุซ ูู ุงูุงุณู ุงูุฃุฎูุฑ
- โ ุงูุจุญุซ ูู ุงูุงุณู ุงููุงูู

### 3๏ธโฃ ุขุฎุฑ ุฑุณุงูุฉ
- โ ุนุฑุถ ุขุฎุฑ ุฑุณุงูุฉ ูู ูู ูุญุงุฏุซุฉ
- โ ูุนุฑูุฉ ุฅุฐุง ูุงูุช ููู ุฃู ูู ุงูุทุฑู ุงูุขุฎุฑ
- โ ููุน ุงูุฑุณุงูุฉ (text/attachment/mixed)

### 4๏ธโฃ ุงูุชุตูุญ (Pagination)
- โ ุฏุนู ุงูุชุตูุญ ุงูููุงุณู
- โ ุงูุชุญูู ูู ุนุฏุฏ ุงูุนูุงุตุฑ
- โ ูุนูููุงุช ุงูุชุตูุญ ูู meta

### 5๏ธโฃ ุญุงูุฉ ูุงุฑุบุฉ
- โ ุฑุณุงูุฉ "ูุง ุชูุฌุฏ ูุญุงุฏุซุงุช ุจุนุฏ" ุนูุฏ ุนุฏู ูุฌูุฏ ูุญุงุฏุซุงุช

---

## ๐ฏ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุฌูุจ ุฌููุน ุงููุญุงุฏุซุงุช:
```bash
GET /api/conversations
Authorization: Bearer {token}
```

### ุงูุจุญุซ:
```bash
GET /api/conversations?search=ุณุงุฑุฉ
Authorization: Bearer {token}
```

### ุงูุชุตูุญ:
```bash
GET /api/conversations?per_page=10&page=2
Authorization: Bearer {token}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ูู Postman:
```
Method: GET
URL: {{base_url}}/conversations
Headers:
  - Authorization: Bearer {{token}}
  - Accept: application/json
Query Params:
  - search: (optional)
  - per_page: (optional)
```

### ูู cURL:
```bash
curl -X GET "http://localhost:8000/api/conversations" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Accept: application/json"
```

---

## ๐ ุจููุฉ ุงูุจูุงูุงุช

### ุงููุญุงุฏุซุฉ:
- `id` - ูุนุฑู ุงููุญุงุฏุซุฉ
- `booking_id` - ูุนุฑู ุงูุญุฌุฒ
- `other_participant` - ุจูุงูุงุช ุงููุดุงุฑู ุงูุขุฎุฑ
  - `id`, `first_name`, `last_name`, `full_name`, `avatar`
- `last_message` - ุขุฎุฑ ุฑุณุงูุฉ
  - `id`, `body`, `type`, `sender_id`, `is_from_me`, `created_at`
- `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก
- `updated_at` - ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ

---

## ๐ ุงูุฃูุงู

- โ ูุชุทูุจ ูุตุงุฏูุฉ (Bearer Token)
- โ ูุนุฑุถ ููุท ูุญุงุฏุซุงุช ุงููุณุชุฎุฏู ุงููุณุฌู
- โ ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช
- โ ูุง ูููู ุฑุคูุฉ ูุญุงุฏุซุงุช ุงูุขุฎุฑูู

---

## ๐ ููุงุญุธุงุช

1. **ุงูุชุฑุชูุจ:** ุงููุญุงุฏุซุงุช ูุฑุชุจุฉ ุญุณุจ ุขุฎุฑ ุชุญุฏูุซ (ุงูุฃุญุฏุซ ุฃููุงู)
2. **ุงููุดุงุฑู:** ูุชู ุนุฑุถ ุงููุดุงุฑู ุงูุขุฎุฑ ููุท (ููุณ ุงููุณุชุฎุฏู ุงูุญุงูู)
3. **ุขุฎุฑ ุฑุณุงูุฉ:** ุฅุฐุง ูู ุชูุฌุฏ ุฑุณุงุฆูุ `last_message` = `null`
4. **ุงูุตูุฑุฉ:** ุฅุฐุง ูู ุชูุฌุฏ ุตูุฑุฉุ `avatar` = `null`
5. **ุงูุจุญุซ:** ูุจุญุซ ูู ุฃุณูุงุก ุงููุดุงุฑููู ููุท (ููุณ ูู ูุต ุงูุฑุณุงุฆู)

---

## ๐ ุงูุชูุงูู

### ูุน ุจุงูู ุงูู APIs:
1. **ุฌูุจ ุงููุงุฆูุฉ** โ `GET /api/conversations`
2. **ูุชุญ ูุญุงุฏุซุฉ** โ `GET /api/conversations/{id}/messages`
3. **ุฅุฑุณุงู ุฑุณุงูุฉ** โ `POST /api/conversations/{id}/messages`
4. **ุชุญููู ูุฑูู** โ `GET /api/attachments/{id}`

---

## ๐ ุงูุชูุซูู ุงููุงูู

ุฑุงุฌุน ุงูููู: `postman/CONVERSATIONS_LIST_API.md`

---

**โ API ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุขู!**

---

*ุชุงุฑูุฎ ุงูุฅูุดุงุก: 21 ููุงูุฑ 2025*
